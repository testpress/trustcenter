"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[947],{5947:(t,e,i)=>{let n,s,r,h,l;function o(t,e,i){let n=typeof i,s=typeof t;if("undefined"!==n){if("undefined"!==s){if(i){if("function"===s&&n===s)return function(e){return t(i(e))};if((e=t.constructor)===i.constructor){if(e===Array)return i.concat(t);if(e===Map){var r=new Map(i);for(var h of t)r.set(h[0],h[1]);return r}if(e===Set){for(r of(h=new Set(i),t.values()))h.add(r);return h}}}return t}return i}return"undefined"===s?e:t}function f(t,e){return void 0===t?e:t}function u(){return Object.create(null)}function a(t){return"string"==typeof t}function c(t){return"object"==typeof t}function g(t,e){if(a(e))t=t[e];else for(let i=0;t&&i<e.length;i++)t=t[e[i]];return t}i.d(e,{Ay:()=>tD});let d=/[^\p{L}\p{N}]+/u,p=/(\d{3})/g,m=/(\D)(\d{3})/g,w=/(\d{3})(\D)/g,y=/[\u0300-\u036f]/g;function x(t={}){if(!this||this.constructor!==x)return new x(...arguments);if(arguments.length)for(t=0;t<arguments.length;t++)this.assign(arguments[t]);else this.assign(t)}function b(t){t.F=null,t.B.clear(),t.D.clear()}function v(t,e,i){i||(e||"object"!=typeof t?"object"==typeof e&&(i=e,e=0):i=t),i&&(t=i.query||t,e=i.limit||e);let n=""+(e||0);i&&(n+=(i.offset||0)+!!i.context+!!i.suggest+(!1!==i.resolve)+(i.resolution||this.resolution)+(i.boost||0)),t=(""+t).toLowerCase(),this.cache||(this.cache=new k);let s=this.cache.get(t+n);if(!s){let r=i&&i.cache;r&&(i.cache=!1),s=this.search(t,e,i),r&&(i.cache=r),this.cache.set(t+n,s)}return s}function k(t){this.limit=t&&!0!==t?t:1e3,this.cache=new Map,this.h=""}(S=x.prototype).assign=function(t){this.normalize=o(t.normalize,!0,this.normalize);let e=t.include,i=e||t.exclude||t.split,n;if(i||""===i){if("object"==typeof i&&i.constructor!==RegExp){let t="";n=!e,e||(t+="\\p{Z}"),i.letter&&(t+="\\p{L}"),i.number&&(t+="\\p{N}",n=!!e),i.symbol&&(t+="\\p{S}"),i.punctuation&&(t+="\\p{P}"),i.control&&(t+="\\p{C}"),(i=i.char)&&(t+="object"==typeof i?i.join(""):i);try{this.split=RegExp("["+(e?"^":"")+t+"]+","u")}catch(t){this.split=/\s+/}}else this.split=i,n=!1===i||"a1a".split(i).length<2;this.numeric=o(t.numeric,n)}else{try{this.split=o(this.split,d)}catch(t){this.split=/\s+/}this.numeric=o(t.numeric,o(this.numeric,!0))}if(this.prepare=o(t.prepare,null,this.prepare),this.finalize=o(t.finalize,null,this.finalize),i=t.filter,this.filter="function"==typeof i?i:o(i&&new Set(i),null,this.filter),this.dedupe=o(t.dedupe,!0,this.dedupe),this.matcher=o((i=t.matcher)&&new Map(i),null,this.matcher),this.mapper=o((i=t.mapper)&&new Map(i),null,this.mapper),this.stemmer=o((i=t.stemmer)&&new Map(i),null,this.stemmer),this.replacer=o(t.replacer,null,this.replacer),this.minlength=o(t.minlength,1,this.minlength),this.maxlength=o(t.maxlength,1024,this.maxlength),this.rtl=o(t.rtl,!1,this.rtl),(this.cache=i=o(t.cache,!0,this.cache))&&(this.F=null,this.L="number"==typeof i?i:2e5,this.B=new Map,this.D=new Map,this.I=this.H=128),this.h="",this.J=null,this.A="",this.K=null,this.matcher)for(let t of this.matcher.keys())this.h+=(this.h?"|":"")+t;if(this.stemmer)for(let t of this.stemmer.keys())this.A+=(this.A?"|":"")+t;return this},S.addStemmer=function(t,e){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(t,e),this.A+=(this.A?"|":"")+t,this.K=null,this.cache&&b(this),this},S.addFilter=function(t){return"function"==typeof t?this.filter=t:(this.filter||(this.filter=new Set),this.filter.add(t)),this.cache&&b(this),this},S.addMapper=function(t,e){return"object"==typeof t?this.addReplacer(t,e):t.length>1?this.addMatcher(t,e):(this.mapper||(this.mapper=new Map),this.mapper.set(t,e),this.cache&&b(this),this)},S.addMatcher=function(t,e){return"object"==typeof t?this.addReplacer(t,e):t.length<2&&(this.dedupe||this.mapper)?this.addMapper(t,e):(this.matcher||(this.matcher=new Map),this.matcher.set(t,e),this.h+=(this.h?"|":"")+t,this.J=null,this.cache&&b(this),this)},S.addReplacer=function(t,e){return"string"==typeof t?this.addMatcher(t,e):(this.replacer||(this.replacer=[]),this.replacer.push(t,e),this.cache&&b(this),this)},S.encode=function(t,e){if(this.cache&&t.length<=this.H)if(this.F){if(this.B.has(t))return this.B.get(t)}else this.F=setTimeout(b,50,this);this.normalize&&(t="function"==typeof this.normalize?this.normalize(t):y?t.normalize("NFKD").replace(y,"").toLowerCase():t.toLowerCase()),this.prepare&&(t=this.prepare(t)),this.numeric&&t.length>3&&(t=t.replace(m,"$1 $2").replace(w,"$1 $2").replace(p,"$1 "));let i=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer),n=[],s=u(),r,h,l=this.split||""===this.split?t.split(this.split):[t];for(let t=0,f,u;t<l.length;t++)if((f=u=l[t])&&!(f.length<this.minlength||f.length>this.maxlength)){if(e){if(s[f])continue;s[f]=1}else{if(r===f)continue;r=f}if(i)n.push(f);else if(!this.filter||("function"==typeof this.filter?this.filter(f):!this.filter.has(f))){if(this.cache&&f.length<=this.I)if(this.F){var o=this.D.get(f);if(o||""===o){o&&n.push(o);continue}}else this.F=setTimeout(b,50,this);if(this.stemmer){let t;for(this.K||(this.K=RegExp("(?!^)("+this.A+")$"));t!==f&&f.length>2;)t=f,f=f.replace(this.K,t=>this.stemmer.get(t))}if(f&&(this.mapper||this.dedupe&&f.length>1)){o="";for(let t=0,e="",i,n;t<f.length;t++)(i=f.charAt(t))===e&&this.dedupe||((n=this.mapper&&this.mapper.get(i))||""===n?(n!==e||!this.dedupe)&&(e=n)&&(o+=n):o+=e=i);f=o}if(this.matcher&&f.length>1&&(this.J||(this.J=RegExp("("+this.h+")","g")),f=f.replace(this.J,t=>this.matcher.get(t))),f&&this.replacer)for(o=0;f&&o<this.replacer.length;o+=2)f=f.replace(this.replacer[o],this.replacer[o+1]);if(this.cache&&u.length<=this.I&&(this.D.set(u,f),this.D.size>this.L&&(this.D.clear(),this.I=this.I/1.1|0)),f){if(f!==u)if(e){if(s[f])continue;s[f]=1}else{if(h===f)continue;h=f}n.push(f)}}}return this.finalize&&(n=this.finalize(n)||n),this.cache&&t.length<=this.H&&(this.B.set(t,n),this.B.size>this.L&&(this.B.clear(),this.H=this.H/1.1|0)),n},k.prototype.set=function(t,e){this.cache.set(this.h=t,e),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)},k.prototype.get=function(t){let e=this.cache.get(t);return e&&this.h!==t&&(this.cache.delete(t),this.cache.set(this.h=t,e)),e},k.prototype.remove=function(t){for(let e of this.cache){let i=e[0];e[1].includes(t)&&this.cache.delete(i)}},k.prototype.clear=function(){this.cache.clear(),this.h=""};let A={normalize:!1,numeric:!1,dedupe:!1},z={},j=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),M=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),B=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],C={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,ÃŸ:2,d:3,t:3,l:4,m:5,n:5,r:6};var S,_={Exact:A,Default:z,Normalize:z,LatinBalance:{mapper:j},LatinAdvanced:{mapper:j,matcher:M,replacer:B},LatinExtra:{mapper:j,replacer:B.concat([/(?!^)[aeo]/g,""]),matcher:M},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(t){for(let i=0;i<t.length;i++){var e=t[i];let n=e.charAt(0),s=C[n];for(let t=1,i;t<e.length&&("h"===(i=e.charAt(t))||"w"===i||!(i=C[i])||i===s||(n+=i,s=i,4!==n.length));t++);t[i]=n}}},CJK:{split:""},LatinExact:A,LatinDefault:z,LatinSimple:z};function O(t,e,i,n){let s=[];for(let r=0,h;r<t.index.length;r++)if(e>=(h=t.index[r]).length)e-=h.length;else{let r=(e=h[n?"splice":"slice"](e,i)).length;if(r&&(s=s.length?s.concat(e):e,i-=r,n&&(t.length-=r),!i))break;e=0}return s}function D(t){if(!this||this.constructor!==D)return new D(t);this.index=t?[t]:[],this.length=t?t.length:0;let e=this;return new Proxy([],{get:(t,i)=>"length"===i?e.length:"push"===i?function(t){e.index[e.index.length-1].push(t),e.length++}:"pop"===i?function(){if(e.length)return e.length--,e.index[e.index.length-1].pop()}:"indexOf"===i?function(t){let i=0;for(let n=0,s,r;n<e.index.length;n++){if((r=(s=e.index[n]).indexOf(t))>=0)return i+r;i+=s.length}return -1}:"includes"===i?function(t){for(let i=0;i<e.index.length;i++)if(e.index[i].includes(t))return!0;return!1}:"slice"===i?function(t,i){return O(e,t||0,i||e.length,!1)}:"splice"===i?function(t,i){return O(e,t||0,i||e.length,!0)}:"constructor"===i?Array:"symbol"!=typeof i?(t=e.index[i/0x80000000|0])&&t[i]:void 0,set:(t,i,n)=>(t=i/0x80000000|0,(e.index[t]||(e.index[t]=[]))[i]=n,e.length++,!0)})}function P(t=8){if(!this||this.constructor!==P)return new P(t);this.index=u(),this.h=[],this.size=0,t>32?(this.B=q,this.A=BigInt(t)):(this.B=L,this.A=t)}function I(t=8){if(!this||this.constructor!==I)return new I(t);this.index=u(),this.h=[],this.size=0,t>32?(this.B=q,this.A=BigInt(t)):(this.B=L,this.A=t)}function L(t){let e=2**this.A-1;if("number"==typeof t)return t&e;let i=0,n=this.A+1;for(let s=0;s<t.length;s++)i=(i*n^t.charCodeAt(s))&e;return 32===this.A?i+0x80000000:i}function q(t){let e=BigInt(2)**this.A-BigInt(1);var i=typeof t;if("bigint"===i)return t&e;if("number"===i)return BigInt(t)&e;i=BigInt(0);let n=this.A+BigInt(1);for(let s=0;s<t.length;s++)i=(i*n^BigInt(t.charCodeAt(s)))&e;return i}async function F(t){var e=(t=t.data).task;let i=t.id,r=t.args;if("init"===e)s=t.options||{},(e=t.factory)?(Function("return "+e)()(self),n=new self.FlexSearch.Index(s),delete self.FlexSearch):n=new tz(s),postMessage({id:i});else{let h;"export"===e&&(r[1]?(r[0]=s.export,r[2]=0,r[3]=1):r=null),"import"===e?r[0]&&(t=await s.import.call(n,r[0]),n.import(r[0],t)):((h=r&&n[e].apply(n,r))&&h.then&&(h=await h),h&&h.await&&(h=await h.await),"search"===e&&h.result&&(h=h.result)),postMessage("search"===e?{id:i,msg:h}:{id:i})}}function N(t){E.call(t,"add"),E.call(t,"append"),E.call(t,"search"),E.call(t,"update"),E.call(t,"remove"),E.call(t,"searchCache")}function $(){r=l=0}function E(t){this[t+"Async"]=function(){let e,i=arguments;var n=i[i.length-1];if("function"==typeof n&&(e=n,delete i[i.length-1]),r?l||(l=Date.now()-h>=this.priority*this.priority*3):(r=setTimeout($,0),h=Date.now()),l){let e=this;return new Promise(n=>{setTimeout(function(){n(e[t+"Async"].apply(e,i))},0)})}let s=this[t].apply(this,i);return n=s.then?s:new Promise(t=>t(s)),e&&n.then(e),n}}D.prototype.clear=function(){this.index.length=0},D.prototype.push=function(){},P.prototype.get=function(t){let e=this.index[this.B(t)];return e&&e.get(t)},P.prototype.set=function(t,e){var i=this.B(t);let n=this.index[i];n?(i=n.size,n.set(t,e),(i-=n.size)&&this.size++):(this.index[i]=n=new Map([[t,e]]),this.h.push(n),this.size++)},I.prototype.add=function(t){var e=this.B(t);let i=this.index[e];i?(e=i.size,i.add(t),(e-=i.size)&&this.size++):(this.index[e]=i=new Set([t]),this.h.push(i),this.size++)},(S=P.prototype).has=I.prototype.has=function(t){let e=this.index[this.B(t)];return e&&e.has(t)},S.delete=I.prototype.delete=function(t){let e=this.index[this.B(t)];e&&e.delete(t)&&this.size--},S.clear=I.prototype.clear=function(){this.index=u(),this.h=[],this.size=0},S.values=I.prototype.values=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].values())yield e},S.keys=I.prototype.keys=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].keys())yield e},S.entries=I.prototype.entries=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].entries())yield e};let J=0;function R(t={},e){var n,s,r;function h(i){function n(t){let e=(t=t.data||t).id,i=e&&f.h[e];i&&(i(t.msg),delete f.h[e])}if(this.worker=i,this.h=u(),this.worker)return(o?this.worker.on("message",n):this.worker.onmessage=n,t.config)?new Promise(function(e){J>1e9&&(J=0),f.h[++J]=function(){e(f)},f.worker.postMessage({id:J,task:"init",factory:l,options:t})}):(this.priority=t.priority||4,this.encoder=e||null,this.worker.postMessage({task:"init",factory:l,options:t}),this)}if(!this||this.constructor!==R)return new R(t);let l="undefined"!=typeof self?self._factory:"undefined"!=typeof window?window._factory:null;l&&(l=l.toString());let o="undefined"==typeof window,f=this,a=(n=l,s=o,r=t.worker,s?new(i(7809)).Worker("//worker/node.js"):n?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+F.toString()],{type:"text/javascript"}))):new window.Worker("string"==typeof r?r:"file:///Users/karthik/workspace/trustcenter/node_modules/flexsearch/dist/flexsearch.bundle.module.min.js".replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js"),{type:"module"}));return a.then?a.then(function(t){return h.call(f,t)}):h.call(this,a)}function T(t){R.prototype[t]=function(){let e,i=this,n=[].slice.call(arguments);var s=n[n.length-1];return"function"==typeof s&&(e=s,n.pop()),s=new Promise(function(e){"export"===t&&"function"==typeof n[0]&&(n[0]=null),J>1e9&&(J=0),i.h[++J]=e,i.worker.postMessage({task:t,id:J,args:n})}),e?(s.then(e),this):s}}function K(t,e,i,n){if(!t.length)return t;if(1===t.length)return t=t[0],t=i||t.length>e?t.slice(i,i+e):t,n?ts.call(this,t):t;let s=[];for(let r=0,h,l;r<t.length;r++)if((h=t[r])&&(l=h.length)){if(i){if(i>=l){i-=l;continue}l=(h=h.slice(i,i+e)).length,i=0}if(l>e&&(h=h.slice(0,e),l=e),!s.length&&l>=e)return n?ts.call(this,h):h;if(s.push(h),!(e-=l))break}return s=s.length>1?[].concat.apply([],s):s[0],n?ts.call(this,s):s}function G(t,e,i,n){var s=n[0];if(s[0]&&s[0].query)return t[e].apply(t,s);if(!("and"!==e&&"not"!==e||t.result.length||t.await||s.suggest))return n.length>1&&(s=n[n.length-1]),(n=s.resolve)?t.await||t.result:t;let r=[],h=0,l=0,o,f,u,a,c;for(e=0;e<n.length;e++)if(s=n[e]){var g=void 0;if(s.constructor===X)g=s.await||s.result;else if(s.then||s.constructor===Array)g=s;else{h=s.limit||0,l=s.offset||0,u=s.suggest,f=s.resolve,o=((a=s.highlight||t.highlight)||s.enrich)&&f,g=s.queue;let i=s.async||g,n=s.index,d=s.query;if(n?t.index||(t.index=n):n=t.index,d||s.tag){let h=s.field||s.pluck;if(h&&(d&&(!t.query||a)&&(t.query=d,t.field=h,t.highlight=a),n=n.index.get(h)),g&&(c||t.await)){let h;c=1;let l=t.C.length,o=new Promise(function(t){h=t});!function(e,n){o.h=function(){n.index=null,n.resolve=!1;let s=i?e.searchAsync(n):e.search(n);return s.then?s.then(function(e){return t.C[l]=e=e.result||e,h(e),e}):(s=s.result||s,h(s),s)}}(n,Object.assign({},s)),t.C.push(o),r[e]=o;continue}s.resolve=!1,s.index=null,g=i?n.searchAsync(s):n.search(s),s.resolve=f,s.index=n}else if(s.and)g=H(s,"and",n);else if(s.or)g=H(s,"or",n);else if(s.not)g=H(s,"not",n);else{if(!s.xor)continue;g=H(s,"xor",n)}}g.await?(c=1,g=g.await):g.then?(c=1,g=g.then(function(t){return t.result||t})):g=g.result||g,r[e]=g}if(c&&!t.await&&(t.await=new Promise(function(e){t.return=e})),c){let e=Promise.all(r).then(function(n){for(let s=0;s<t.C.length;s++)if(t.C[s]===e){t.C[s]=function(){return i.call(t,n,h,l,o,f,u,a)};break}Y(t)});t.C.push(e)}else{if(!t.await)return i.call(t,r,h,l,o,f,u,a);t.C.push(function(){return i.call(t,r,h,l,o,f,u,a)})}return f?t.await||t.result:t}function H(t,e,i){let n=(t=t[e])[0]||t;return n.index||(n.index=i),i=new X(n),t.length>1&&(i=i[e].apply(i,t.slice(1))),i}function W(t,e,i,n,s,r,h){return t.length&&(this.result.length&&t.push(this.result),t.length<2?this.result=t[0]:(this.result=te(t,e,i,!1,this.h),i=0)),s&&(this.await=null),s?this.resolve(e,i,n,h):this}function U(t,e,i,n,s,r,h){let l;if(!r&&!this.result.length)return s?this.result:this;if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{let n=0;for(let e=0,i,s;e<t.length;e++)if((i=t[e])&&(s=i.length))n<s&&(n=s);else if(!r){n=0;break}n?(this.result=tt(t,n,e,i,r,this.h,s),l=!0):this.result=[]}else r||(this.result=t);return s&&(this.await=null),s?this.resolve(e,i,n,h,l):this}function Z(t,e,i,n,s,r,h){if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{t:{r=i;var l=this.h;let n=[],h=u(),o=0;for(let e=0,i;e<t.length;e++)if(i=t[e]){o<i.length&&(o=i.length);for(let t=0,e;t<i.length;t++)if(e=i[t])for(let t=0,i;t<e.length;t++)h[i=e[t]]=h[i]?2:1}for(let i=0,f,u=0;i<o;i++)for(let o=0,a;o<t.length;o++)if((a=t[o])&&(f=a[i])){for(let a=0,c;a<f.length;a++)if(1===h[c=f[a]])if(r)r--;else if(s){if(n.push(c),n.length===e){t=n;break t}}else{let s=i+(o?l:0);if(n[s]||(n[s]=[]),n[s].push(c),++u===e){t=n;break t}}}t=n}this.result=t,l=!0}else r||(this.result=t);return s&&(this.await=null),s?this.resolve(e,i,n,h,l):this}function Q(t,e,i,n,s,r,h){if(!r&&!this.result.length)return s?this.result:this;if(t.length&&this.result.length){t:{r=i;var l=[];t=new Set(t.flat().flat());for(let i=0,n,h=0;i<this.result.length;i++)if(n=this.result[i]){for(let o=0,f;o<n.length;o++)if(f=n[o],!t.has(f)){if(r)r--;else if(s){if(l.push(f),l.length===e){t=l;break t}}else if(l[i]||(l[i]=[]),l[i].push(f),++h===e){t=l;break t}}}t=l}this.result=t,l=!0}return s&&(this.await=null),s?this.resolve(e,i,n,h,l):this}function V(t,e,i,n,s){let r,h,l,o,f;"string"==typeof s?(r=s,s=""):r=s.template,h=r.indexOf("$1"),l=r.substring(h+2),h=r.substring(0,h);let u=s&&s.boundary,a=!s||!1!==s.clip,c=s&&s.merge&&l&&h&&RegExp(l+" "+h,"g");s=s&&s.ellipsis;var d=0;if("object"==typeof s){var p=s.template;d=p.length-2,s=s.pattern}"string"!=typeof s&&(s=!1===s?"":"..."),d&&(s=p.replace("$1",s)),p=s.length-d,"object"==typeof u&&(0===(o=u.before)&&(o=-1),0===(f=u.after)&&(f=-1),u=u.total||9e5),d=new Map;for(let I=0,L,q;I<e.length;I++){let F;if(n)F=e,q=n;else{var m=e[I];if(!(q=m.field))continue;F=m.result}L=i.get(q).encoder,"string"!=typeof(m=d.get(L))&&(m=L.encode(t),d.set(L,m));for(let t=0;t<F.length;t++){var w=F[t].doc;if(!w||!(w=g(w,q)))continue;var y=w.trim().split(/\s+/);if(!y.length)continue;w="";var x=[];let e=[];for(var b=-1,v=-1,k=0,A=0;A<y.length;A++){let t;var z=y[A],j=L.encode(z);if((j=j.length>1?j.join(" "):j[0])&&z){for(var M=z.length,B=(L.split?z.replace(L.split,""):z).length-j.length,C="",S=0,_=0;_<m.length;_++){var O=m[_];if(O){var D=O.length;D+=B,S&&D<=S||(O=j.indexOf(O))>-1&&(C=(O?z.substring(0,O):"")+h+z.substring(O,O+D)+l+(O+D<M?z.substring(O+D):""),S=D,t=!0)}}C&&(u&&(b<0&&(b=w.length+ +!!w),v=w.length+ +!!w+C.length,k+=M,e.push(x.length),x.push({match:C})),w+=(w?" ":"")+C)}if(t){if(u&&k>=u)break}else z=y[A],w+=(w?" ":"")+z,u&&x.push({text:z})}if(k=e.length*(r.length-2),o||f||u&&w.length-k>u)if(k=u+k-2*p,A=v-b,o>0&&(A+=o),f>0&&(A+=f),A<=k)y=o?b-(o>0?o:0):b-((k-A)/2|0),x=f?v+(f>0?f:0):y+k,a||(y>0&&" "!==w.charAt(y)&&" "!==w.charAt(y-1)&&(y=w.indexOf(" ",y))<0&&(y=0),x<w.length&&" "!==w.charAt(x-1)&&" "!==w.charAt(x)&&((x=w.lastIndexOf(" ",x))<v?x=v:++x)),w=(y?s:"")+w.substring(y,x)+(x<w.length?s:"");else{for(v=[],b={},k={},A={},z={},j={},C=B=M=0,_=S=1;;){var P=void 0;for(let t=0,i;t<e.length;t++){if(i=e[t],C)if(B!==C){if(A[t+1])continue;if(b[i+=C]){M-=p,k[t+1]=1,A[t+1]=1;continue}if(i>=x.length-1){if(i>=x.length){A[t+1]=1,i>=y.length&&(k[t+1]=1);continue}M-=p}if(w=x[i].text,D=f&&j[t])if(D>0){if(w.length>D)if(A[t+1]=1,!a)continue;else w=w.substring(0,D);(D-=w.length)||(D=-1),j[t]=D}else{A[t+1]=1;continue}if(M+w.length+1<=u)w=" "+w,v[t]+=w;else if(a)(P=u-M-1)>0&&(w=" "+w.substring(0,P),v[t]+=w),A[t+1]=1;else{A[t+1]=1;continue}}else{if(A[t])continue;if(b[i-=B]){M-=p,A[t]=1,k[t]=1;continue}if(i<=0){if(i<0){A[t]=1,k[t]=1;continue}M-=p}if(w=x[i].text,D=o&&z[t])if(D>0){if(w.length>D)if(A[t]=1,!a)continue;else w=w.substring(w.length-D);(D-=w.length)||(D=-1),z[t]=D}else{A[t]=1;continue}if(M+w.length+1<=u)w+=" ",v[t]=w+v[t];else if(a)(P=w.length+1-(u-M))>=0&&P<w.length&&(w=w.substring(P)+" ",v[t]=w+v[t]),A[t]=1;else{A[t]=1;continue}}else{let e;if(w=x[i].match,o&&(z[t]=o),f&&(j[t]=f),t&&M++,i?!t&&p&&(M+=p):(k[t]=1,A[t]=1),i>=y.length-1||i<x.length-1&&x[i+1].match?e=1:p&&(M+=p),M-=r.length-2,!t||M+w.length<=u)v[t]=w;else{P=S=_=k[t]=0;break}e&&(k[t+1]=1,A[t+1]=1)}M+=w.length,P=b[i]=1}if(P)B===C?C++:B++;else{if(B===C?S=0:_=0,!S&&!_)break;S?C=++B:C++}}w="";for(let t=0;t<v.length;t++)w+=(t&&k[t]?" ":(t&&!s?" ":"")+s)+v[t];s&&!k[v.length]&&(w+=s)}c&&(w=w.replace(c," ")),F[t].highlight=w}if(n)break}return e}function X(t,e){if(!this||this.constructor!==X)return new X(t,e);let i=0,n,s,r,h,l,o;if(t&&t.index){let n=t;if(e=n.index,i=n.boost||0,s=n.query){r=n.field||n.pluck,h=n.highlight;let i=n.resolve;t=n.async||n.queue,n.resolve=!1,n.index=null,t=t?e.searchAsync(n):e.search(n),n.resolve=i,n.index=e,t=t.result||t}else t=[]}if(t&&t.then){let e=this;n=[t=t.then(function(t){e.C[0]=e.result=t.result||t,Y(e)})],t=[],l=new Promise(function(t){o=t})}this.index=e||null,this.result=t||[],this.h=i,this.C=n||[],this.await=l||null,this.return=o||null,this.highlight=h||null,this.query=s||"",this.field=r||""}function Y(t,e){let i=t.result;var n=t.await;t.await=null;for(let e=0,s;e<t.C.length;e++)if(s=t.C[e]){if("function"==typeof s)i=s(),t.C[e]=i=i.result||i,e--;else if(s.h)i=s.h(),t.C[e]=i=i.result||i,e--;else if(s.then)return t.await=n}return n=t.return,t.C=[],t.return=null,e||n(i),i}function tt(t,e,i,n,s,r,h){let l=t.length,o=[],f,a;f=u();for(let u=0,c,g,d,p;u<e;u++)for(let e=0;e<l;e++)if(u<(d=t[e]).length&&(c=d[u]))for(let t=0;t<c.length;t++){if((a=f[g=c[t]])?f[g]++:(a=0,f[g]=1),p=o[a]||(o[a]=[]),!h){let t=u+(e||!s?0:r||0);p=p[t]||(p[t]=[])}if(p.push(g),h&&i&&a===l-1&&p.length-n===i)return n?p.slice(n):p}if(t=o.length)if(s)o=o.length>1?te(o,i,n,h,r):(o=o[0])&&i&&o.length>i||n?o.slice(n,i+n):o;else{if(t<l)return[];if(o=o[t-1],i||n)if(h)(o.length>i||n)&&(o=o.slice(n,i+n));else{s=[];for(let t=0,e;t<o.length;t++)if(e=o[t]){if(n&&e.length>n)n-=e.length;else if((i&&e.length>i||n)&&(e=e.slice(n,i+n),i-=e.length,n&&(n-=e.length)),s.push(e),!i)break}o=s}}return o}function te(t,e,i,n,s){let r,h,l=[],o=u();var f=t.length;if(n){for(s=f-1;s>=0;s--)if(h=(n=t[s])&&n.length){for(f=0;f<h;f++)if(!o[r=n[f]]){if(o[r]=1,i)i--;else if(l.push(r),l.length===e)return l}}}else for(let u=f-1,a,c=0;u>=0;u--){a=t[u];for(let t=0;t<a.length;t++)if(h=(n=a[t])&&n.length){for(let a=0;a<h;a++)if(!o[r=n[a]])if(o[r]=1,i)i--;else{let i=(t+(u<f-1&&s||0))/(u+1)|0;if((l[i]||(l[i]=[])).push(r),++c===e)return l}}}return l}function ti(t){let e=[],i=u(),n=u();for(let s=0,r,h,l,o,f,u,a;s<t.length;s++){h=(r=t[s]).field,l=r.result;for(let t=0;t<l.length;t++)"object"!=typeof(f=l[t])?f={id:o=f}:o=f.id,(u=i[o])?u.push(h):(f.field=i[o]=[h],e.push(f)),(a=f.highlight)&&((u=n[o])||(n[o]=u={},f.highlight=u),u[h]=a)}return e}function tn(t,e,i,n,s){return(t=this.tag.get(t))&&(t=t.get(e))?((e=t.length-n)>0&&((i&&e>i||n)&&(t=t.slice(n,n+i)),s&&(t=ts.call(this,t))),t):[]}function ts(t){if(!this||!this.store)return t;if(this.db)return this.index.get(this.field[0]).db.enrich(t);let e=Array(t.length);for(let i=0,n;i<t.length;i++)n=t[i],e[i]={id:n,doc:this.store.get(n)};return e}function tr(t){let e,i;if(!this||this.constructor!==tr)return new tr(t);let n=t.document||t.doc||t;if(this.B=[],this.field=[],this.D=[],this.key=(e=n.key||n.id)&&tl(e,this.D)||"id",(i=t.keystore||0)&&(this.keystore=i),this.fastupdate=!!t.fastupdate,this.reg=!this.fastupdate||t.worker||t.db?i?new I(i):new Set:i?new P(i):new Map,this.h=(e=n.store||null)&&e&&!0!==e&&[],this.store=e?i?new P(i):new Map:null,this.cache=(e=t.cache||null)&&new k(e),t.cache=!1,this.worker=t.worker||!1,this.priority=t.priority||4,this.index=th.call(this,t,n),this.tag=null,(e=n.tag)&&("string"==typeof e&&(e=[e]),e.length)){this.tag=new Map,this.A=[],this.F=[];for(let t=0,i,n;t<e.length;t++){if(!(n=(i=e[t]).field||i))throw Error("The tag field from the document descriptor is undefined.");i.custom?this.A[t]=i.custom:(this.A[t]=tl(n,this.D),i.filter&&("string"==typeof this.A[t]&&(this.A[t]=new String(this.A[t])),this.A[t].G=i.filter)),this.F[t]=n,this.tag.set(n,new Map)}}if(this.worker){for(let e of(this.fastupdate=!1,t=[],this.index.values()))e.then&&t.push(e);if(t.length){let e=this;return Promise.all(t).then(function(t){let i=0;for(let n of e.index.entries()){let s=n[0],r=n[1];r.then&&(r=t[i],e.index.set(s,r),i++)}return e})}}else t.db&&(this.fastupdate=!1,this.mount(t.db))}function th(t,e){let i=new Map,n=e.index||e.field||e;a(n)&&(n=[n]);for(let e=0,r,h;e<n.length;e++){if(a(r=n[e])||(h=r,r=r.field),h=c(h)?Object.assign({},t,h):t,this.worker){var s=void 0;s=(s=h.encoder)&&s.encode?s:new x("string"==typeof s?_[s]:s||{}),s=new R(h,s),i.set(r,s)}this.worker||i.set(r,new tz(h,this.reg)),h.custom?this.B[e]=h.custom:(this.B[e]=tl(r,this.D),h.filter&&("string"==typeof this.B[e]&&(this.B[e]=new String(this.B[e])),this.B[e].G=h.filter)),this.field[e]=r}if(this.h){a(t=e.store)&&(t=[t]);for(let e=0,i,n;e<t.length;e++)n=(i=t[e]).field||i,i.custom?(this.h[e]=i.custom,i.custom.O=n):(this.h[e]=tl(n,this.D),i.filter&&("string"==typeof this.h[e]&&(this.h[e]=new String(this.h[e])),this.h[e].G=i.filter))}return i}function tl(t,e){let i=t.split(":"),n=0;for(let s=0;s<i.length;s++)"]"===(t=i[s])[t.length-1]&&(t=t.substring(0,t.length-2))&&(e[n]=!0),t&&(i[n++]=t);return n<i.length&&(i.length=n),n>1?i:i[0]}function to(t,e=0){let i=[],n=[];for(let s of(e&&(e=25e4/e*5e3|0),t.entries()))n.push(s),n.length===e&&(i.push(n),n=[]);return n.length&&i.push(n),i}function tf(t,e){e||(e=new Map);for(let i=0,n;i<t.length;i++)n=t[i],e.set(n[0],n[1]);return e}function tu(t,e=0){let i=[],n=[];for(let s of(e&&(e=25e4/e*1e3|0),t.entries()))n.push([s[0],to(s[1])[0]]),n.length===e&&(i.push(n),n=[]);return n.length&&i.push(n),i}function ta(t,e){e||(e=new Map);for(let i=0,n,s;i<t.length;i++)n=t[i],s=e.get(n[0]),e.set(n[0],tf(n[1],s));return e}function tc(t){let e=[],i=[];for(let n of t.keys())i.push(n),25e4===i.length&&(e.push(i),i=[]);return i.length&&e.push(i),e}function tg(t,e){e||(e=new Set);for(let i=0;i<t.length;i++)e.add(t[i]);return e}function td(t,e,i,n,s,r,h=0){let l=n&&n.constructor===Array;var o=l?n.shift():n;if(!o)return this.export(t,e,s,r+1);if((o=t((e?e+".":"")+(h+1)+"."+i,JSON.stringify(o)))&&o.then){let f=this;return o.then(function(){return td.call(f,t,e,i,l?n:null,s,r,h+1)})}return td.call(this,t,e,i,l?n:null,s,r,h+1)}function tp(t,e){let i="";for(let n of t.entries()){t=n[0];let s=n[1],r="";for(let t=0,i;t<s.length;t++){i=s[t]||[""];let n="";for(let t=0;t<i.length;t++)n+=(n?",":"")+("string"===e?'"'+i[t]+'"':i[t]);n="["+n+"]",r+=(r?",":"")+n}r='["'+t+'",['+r+"]]",i+=(i?",":"")+r}return i}function tm(t,e){let i=0;var n=void 0===e;if(t.constructor===Array){for(let s=0,r,h,l;s<t.length;s++)if((r=t[s])&&r.length){if(n)return 1;if((h=r.indexOf(e))>=0){if(r.length>1)return r.splice(h,1),1;if(delete t[s],i)return 1;l=1}else{if(l)return 1;i++}}}else for(let s of t.entries())n=s[0],tm(s[1],e)?i++:t.delete(n);return i}T("add"),T("append"),T("search"),T("update"),T("remove"),T("clear"),T("export"),T("import"),R.prototype.searchCache=v,N(R.prototype),tr.prototype.add=function(t,e,i){if(c(t)&&(t=g(e=t,this.key)),e&&(t||0===t)){if(!i&&this.reg.has(t))return this.update(t,e);for(let r=0,h;r<this.field.length;r++){h=this.B[r];var n=this.index.get(this.field[r]);if("function"==typeof h){var s=h(e);s&&n.add(t,s,i,!0)}else(!(s=h.G)||s(e))&&(h.constructor===String?h=[""+h]:a(h)&&(h=[h]),function t(e,i,n,s,r,h,l,o){if(e=e[l])if(s===i.length-1){if(e.constructor===Array){if(n[s]){for(i=0;i<e.length;i++)r.add(h,e[i],!0,!0);return}e=e.join(" ")}r.add(h,e,o,!0)}else if(e.constructor===Array)for(l=0;l<e.length;l++)t(e,i,n,s,r,h,l,o);else l=i[++s],t(e,i,n,s,r,h,l,o)}(e,h,this.D,0,n,t,h[0],i))}if(this.tag)for(n=0;n<this.A.length;n++){var r=this.A[n];s=this.tag.get(this.F[n]);let l=u();if("function"==typeof r){if(!(r=r(e)))continue}else{var h=r.G;if(h&&!h(e))continue;r.constructor===String&&(r=""+r),r=g(e,r)}if(s&&r){a(r)&&(r=[r]);for(let e=0,n,o;e<r.length;e++)if(!l[n=r[e]]&&(l[n]=1,(h=s.get(n))?o=h:s.set(n,o=[]),!i||!o.includes(t))){if(o.length===0x80000000-1){if(h=new D(o),this.fastupdate)for(let t of this.reg.values())t.includes(o)&&(t[t.indexOf(o)]=h);s.set(n,o=h)}o.push(t),this.fastupdate&&((h=this.reg.get(t))?h.push(o):this.reg.set(t,[o]))}}}if(this.store&&(!i||!this.store.has(t))){let n;if(this.h){n=u();for(let t=0,s;t<this.h.length;t++){let r;if(!(i=(s=this.h[t]).G)||i(e)){if("function"==typeof s){if(!(r=s(e)))continue;s=[s.O]}else if(a(s)||s.constructor===String){n[s]=e[s];continue}!function t(e,i,n,s,r,h){if(e=e[r],s===n.length-1)i[r]=h||e;else if(e)if(e.constructor===Array)for(i=i[r]=Array(e.length),r=0;r<e.length;r++)t(e,i,n,s,r);else i=i[r]||(i[r]=u()),r=n[++s],t(e,i,n,s,r)}(e,n,s,0,s[0],r)}}}this.store.set(t,n||e)}this.worker&&(this.fastupdate||this.reg.add(t))}return this},X.prototype.or=function(){return G(this,"or",W,arguments)},X.prototype.and=function(){return G(this,"and",U,arguments)},X.prototype.xor=function(){return G(this,"xor",Z,arguments)},X.prototype.not=function(){return G(this,"not",Q,arguments)},(S=X.prototype).limit=function(t){if(this.await){let e=this;this.C.push(function(){return e.limit(t).result})}else if(this.result.length){let e=[];for(let i=0,n;i<this.result.length;i++)if(n=this.result[i])if(n.length<=t){if(e[i]=n,!(t-=n.length))break}else{e[i]=n.slice(0,t);break}this.result=e}return this},S.offset=function(t){if(this.await){let e=this;this.C.push(function(){return e.offset(t).result})}else if(this.result.length){let e=[];for(let i=0,n;i<this.result.length;i++)(n=this.result[i])&&(n.length<=t?t-=n.length:(e[i]=n.slice(t),t=0));this.result=e}return this},S.boost=function(t){if(this.await){let e=this;this.C.push(function(){return e.boost(t).result})}else this.h+=t;return this},S.resolve=function(t,e,i,n,s){let r=this.await?Y(this,!0):this.result;if(r.then){let h=this;return r.then(function(){return h.resolve(t,e,i,n,s)})}return r.length&&("object"==typeof t?(i=!!(n=t.highlight||this.highlight)||t.enrich,e=t.offset,t=t.limit):i=!!(n=n||this.highlight)||i,r=s?i?ts.call(this.index,r):r:K.call(this.index,r,t||100,e,i)),this.finalize(r,n)},S.finalize=function(t,e){if(t.then){let i=this;return t.then(function(t){return i.finalize(t,e)})}e&&t.length&&this.query&&(t=V(this.query,t,this.index.index,this.field,e));let i=this.return;return this.highlight=this.index=this.result=this.C=this.await=this.return=null,this.query=this.field="",i&&i(t),t},u(),tr.prototype.search=function(t,e,i,n){let s,r,h,l,o,g,d;i||(!e&&c(t)?(i=t,t=""):c(e)&&(i=e,e=0));let p=[];var m=[];let w=0,y=!0,x;if(i){i.constructor===Array&&(i={index:i}),t=i.query||t,s=i.pluck,r=i.merge,l=i.boost,g=s||i.field||(g=i.index)&&(g.index?null:g);var b=this.tag&&i.tag;h=i.suggest,y=!1!==i.resolve,o=i.cache;var v=!!(x=y&&this.store&&i.highlight)||y&&this.store&&i.enrich;e=i.limit||e;var k=i.offset||0;if(e||(e=100*!!y),b&&(!this.db||!n)){b.constructor!==Array&&(b=[b]);var A=[];for(let t=0,e;t<b.length;t++)if((e=b[t]).field&&e.tag){var z=e.tag;if(z.constructor===Array)for(var j=0;j<z.length;j++)A.push(e.field,z[j]);else A.push(e.field,z)}else{z=Object.keys(e);for(let t=0,i,n;t<z.length;t++)if((n=e[i=z[t]]).constructor===Array)for(j=0;j<n.length;j++)A.push(i,n[j]);else A.push(i,n)}if(b=A,!t){if(m=[],A.length)for(b=0;b<A.length;b+=2){if(this.db){if(!(n=this.index.get(A[b])))continue;m.push(n=n.db.tag(A[b+1],e,k,v))}else n=tn.call(this,A[b],A[b+1],e,k,v);p.push(y?{field:A[b],tag:A[b+1],result:n}:[n])}if(m.length){let t=this;return Promise.all(m).then(function(e){for(let t=0;t<e.length;t++)y?p[t].result=e[t]:p[t]=e[t];return y?p:new X(p.length>1?tt(p,1,0,0,h,l):p[0],t)})}return y?p:new X(p.length>1?tt(p,1,0,0,h,l):p[0],this)}}!y&&!s&&(g=g||this.field)&&(a(g)?s=g:(g.constructor===Array&&1===g.length&&(g=g[0]),s=g.field||g.index)),g&&g.constructor!==Array&&(g=[g])}g||(g=this.field),A=(this.worker||this.db)&&!n&&[];for(let s=0,r,l,c;s<g.length;s++){let B;if(l=g[s],!this.db||!this.tag||this.B[s]){if(a(l)||(l=(B=l).field,t=B.query||t,e=f(B.limit,e),k=f(B.offset,k),h=f(B.suggest,h),v=!!(x=y&&this.store&&f(B.highlight,x))||y&&this.store&&f(B.enrich,v),o=f(B.cache,o)),n)r=n[s];else{j=(z=B||i||{}).enrich;var M=this.index.get(l);if(b&&(this.db&&(z.tag=b,d=M.db.support_tag_search,z.field=g),!d&&j&&(z.enrich=!1)),r=o?M.searchCache(t,e,z):M.search(t,e,z),j&&(z.enrich=j),A){A[s]=r;continue}}if(c=(r=r.result||r)&&r.length,b&&c){if(z=[],j=0,this.db&&n){if(!d)for(M=g.length;M<n.length;M++){let t=n[M];if(t&&t.length)j++,z.push(t);else if(!h)return y?p:new X(p,this)}}else for(let t=0,e;t<b.length;t+=2){if(!(e=this.tag.get(b[t])))if(h)continue;else return y?p:new X(p,this);if((e=e&&e.get(b[t+1]))&&e.length)j++,z.push(e);else if(!h)return y?p:new X(p,this)}if(j){if(!(c=(r=function(t,e,i){let n=u(),s=[];for(let t=0,i;t<e.length;t++){i=e[t];for(let t=0;t<i.length;t++)n[i[t]]=1}if(i)for(let e=0,i;e<t.length;e++)n[i=t[e]]&&(s.push(i),n[i]=0);else for(let i=0,r,h;i<t.result.length;i++)for(r=t.result[i],e=0;e<r.length;e++)n[h=r[e]]&&((s[i]||(s[i]=[])).push(h),n[h]=0);return s}(r,z,y)).length)&&!h)return y?r:new X(r,this);j--}}if(c)m[w]=l,p.push(r),w++;else if(1===g.length)return y?p:new X(p,this)}}if(A){if(this.db&&b&&b.length&&!d)for(v=0;v<b.length;v+=2){if(!(m=this.index.get(b[v])))if(h)continue;else return y?p:new X(p,this);A.push(m.db.tag(b[v+1],e,k,!1))}let n=this;return Promise.all(A).then(function(s){return i&&(i.resolve=y),s.length&&(s=n.search(t,e,i,s)),s})}if(!w)return y?p:new X(p,this);if(s&&(!v||!this.store))return p=p[0],y?p:new X(p,this);for(k=0,A=[];k<m.length;k++){if(b=p[k],v&&b.length&&void 0===b[0].doc&&(this.db?A.push(b=this.index.get(this.field[0]).db.enrich(b)):b=ts.call(this,b)),s)return y?x?V(t,b,this.index,s,x):b:new X(b,this);p[k]={field:m[k],result:b}}if(v&&this.db&&A.length){let e=this;return Promise.all(A).then(function(i){for(let t=0;t<i.length;t++)p[t].result=i[t];return x&&(p=V(t,p,e.index,s,x)),r?ti(p):p})}return x&&(p=V(t,p,this.index,s,x)),r?ti(p):p},(S=tr.prototype).mount=function(t){let e=this.field;if(this.tag)for(let t=0,n;t<this.F.length;t++){n=this.F[t];var i=void 0;this.index.set(n,i=new tz({},this.reg)),e===this.field&&(e=e.slice(0)),e.push(n),i.tag=this.tag.get(n)}i=[];let n={db:t.db,type:t.type,fastupdate:t.fastupdate};for(let s=0,r,h;s<e.length;s++){n.field=h=e[s],r=this.index.get(h);let l=new t.constructor(t.id,n);l.id=t.id,i[s]=l.mount(r),r.document=!0,s?r.bypass=!0:r.store=this.store}let s=this;return this.db=Promise.all(i).then(function(){s.db=!0})},S.commit=async function(){let t=[];for(let e of this.index.values())t.push(e.commit());await Promise.all(t),this.reg.clear()},S.destroy=function(){let t=[];for(let e of this.index.values())t.push(e.destroy());return Promise.all(t)},S.append=function(t,e){return this.add(t,e,!0)},S.update=function(t,e){return this.remove(t).add(t,e)},S.remove=function(t){for(var e of(c(t)&&(t=g(t,this.key)),this.index.values()))e.remove(t,!0);if(this.reg.has(t)){if(this.tag&&!this.fastupdate)for(let i of this.tag.values())for(let n of i){e=n[0];let s=n[1],r=s.indexOf(t);r>-1&&(s.length>1?s.splice(r,1):i.delete(e))}this.store&&this.store.delete(t),this.reg.delete(t)}return this.cache&&this.cache.remove(t),this},S.clear=function(){let t=[];for(let e of this.index.values()){let i=e.clear();i.then&&t.push(i)}if(this.tag)for(let t of this.tag.values())t.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),t.length?Promise.all(t):this},S.contain=function(t){return this.db?this.index.get(this.field[0]).db.has(t):this.reg.has(t)},S.cleanup=function(){for(let t of this.index.values())t.cleanup();return this},S.get=function(t){return this.db?this.index.get(this.field[0]).db.enrich(t).then(function(t){return t[0]&&t[0].doc||null}):this.store.get(t)||null},S.set=function(t,e){return"object"==typeof t&&(t=g(e=t,this.key)),this.store.set(t,e),this},S.searchCache=v,S.export=function(t,e,i=0,n=0){let s,r;if(i<this.field.length){let s=this.field[i];if((e=this.index.get(s).export(t,s,i,n=1))&&e.then){let n=this;return e.then(function(){return n.export(t,s,i+1)})}return this.export(t,s,i+1)}switch(n){case 0:s="reg",r=tc(this.reg),e=null;break;case 1:s="tag",r=this.tag&&tu(this.tag,this.reg.size),e=null;break;case 2:s="doc",r=this.store&&to(this.store),e=null;break;default:return}return td.call(this,t,e,s,r||null,i,n)},S.import=function(t,e){var i=t.split(".");"json"===i[i.length-1]&&i.pop();let n=i.length>2?i[0]:"";if(i=i.length>2?i[2]:i[1],this.worker&&n)return this.index.get(n).import(t);if(e){if("string"==typeof e&&(e=JSON.parse(e)),n)return this.index.get(n).import(i,e);switch(i){case"reg":this.fastupdate=!1,this.reg=tg(e,this.reg);for(let t=0,e;t<this.field.length;t++)(e=this.index.get(this.field[t])).fastupdate=!1,e.reg=this.reg;if(this.worker){for(let i of(e=[],this.index.values()))e.push(i.import(t));return Promise.all(e)}break;case"tag":this.tag=ta(e,this.tag);break;case"doc":this.store=tf(e,this.store)}}},N(tr.prototype),tz.prototype.remove=function(t,e){let i=this.reg.size&&(this.fastupdate?this.reg.get(t):this.reg.has(t));if(i){if(this.fastupdate){for(let e=0,n,s;e<i.length;e++)if((n=i[e])&&(s=n.length))if(n[s-1]===t)n.pop();else{let e=n.indexOf(t);e>=0&&n.splice(e,1)}}else tm(this.map,t),this.depth&&tm(this.ctx,t);e||this.reg.delete(t)}return this.db&&(this.commit_task.push({del:t}),this.M&&tj(this)),this.cache&&this.cache.remove(t),this};let tw={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};function ty(t,e,i,n,s,r,h){let l,o;if(!(l=e[i])||h&&!l[h]){if(h?((e=l||(e[i]=u()))[h]=1,(l=(o=t.ctx).get(h))?o=l:o.set(h,o=t.keystore?new P(t.keystore):new Map)):(o=t.map,e[i]=1),(l=o.get(i))?o=l:o.set(i,o=l=[]),r){for(let i=0,r;i<l.length;i++)if((r=l[i])&&r.includes(s)){if(i<=n)return;r.splice(r.indexOf(s),1),t.fastupdate&&(e=t.reg.get(s))&&e.splice(e.indexOf(r),1);break}}if((o=o[n]||(o[n]=[])).push(s),o.length===0x80000000-1){if(e=new D(o),t.fastupdate)for(let i of t.reg.values())i.includes(o)&&(i[i.indexOf(o)]=e);l[n]=o=e}t.fastupdate&&((n=t.reg.get(s))?n.push(o):t.reg.set(s,[o]))}}function tx(t,e,i,n,s){return i&&t>1?e+(n||0)<=t?i+(s||0):(t-1)/(e+(n||0))*(i+(s||0))+1|0:0}function tb(t,e,i,n,s,r,h){let l=t.length,o=t;if(l>1)o=tt(t,e,i,n,s,r,h);else if(1===l)return h?K.call(null,t[0],i,n):new X(t[0],this);return h?o:new X(o,this)}function tv(t,e,i,n,s,r,h){return t=tA(this,t,e,i,n,s,r,h),this.db?t.then(function(t){return s?t||[]:new X(t,this)}):t&&t.length?s?K.call(this,t,i,n):new X(t,this):s?[]:new X([],this)}function tk(t,e,i,n){let s=[];if(t&&t.length){if(t.length<=n)return void e.push(t);for(let e=0,i;e<n;e++)(i=t[e])&&(s[e]=i);if(s.length)return void e.push(s)}if(!i)return s}function tA(t,e,i,n,s,r,h,l){let o;return(i&&(o=t.bidirectional&&e>i)&&(o=i,i=e,e=o),t.db)?t.db.get(e,i,n,s,r,h,l):t=i?(t=t.ctx.get(i))&&t.get(e):t.map.get(e)}function tz(t,e){if(!this||this.constructor!==tz)return new tz(t);if(t){var i=a(t)?t:t.preset;i&&(t=Object.assign({},tw[i],t))}else t={};let n=!0===(i=t.context)?{depth:1}:i||{},s=a(t.encoder)?_[t.encoder]:t.encode||t.encoder||{};this.encoder=s.encode?s:"object"==typeof s?new x(s):{encode:s},this.resolution=t.resolution||9,this.tokenize=i=(i=t.tokenize)&&"default"!==i&&"exact"!==i&&i||"strict",this.depth="strict"===i&&n.depth||0,this.bidirectional=!1!==n.bidirectional,this.fastupdate=!!t.fastupdate,this.score=t.score||null,(i=t.keystore||0)&&(this.keystore=i),this.map=i?new P(i):new Map,this.ctx=i?new P(i):new Map,this.reg=e||(this.fastupdate?i?new P(i):new Map:i?new I(i):new Set),this.N=n.resolution||3,this.rtl=s.rtl||t.rtl||!1,this.cache=(i=t.cache||null)&&new k(i),this.resolve=!1!==t.resolve,(i=t.db)&&(this.db=this.mount(i)),this.M=!1!==t.commit,this.commit_task=[],this.commit_timer=null,this.priority=t.priority||4}function tj(t){t.commit_timer||(t.commit_timer=setTimeout(function(){t.commit_timer=null,t.db.commit(t)},1))}tz.prototype.add=function(t,e,i,n){if(e&&(t||0===t)){if(!n&&!i&&this.reg.has(t))return this.update(t,e);n=this.depth;let f=(e=this.encoder.encode(e,!n)).length;if(f){let a=u(),c=u(),g=this.resolution;for(let u=0;u<f;u++){let d=e[this.rtl?f-1-u:u];var s=d.length;if(s&&(n||!c[d])){var r=this.score?this.score(e,d,u,null,0):tx(g,f,u),h="";switch(this.tokenize){case"tolerant":if(ty(this,c,d,r,t,i),s>2){for(let e=1,n,l,o,f;e<s-1;e++)n=d.charAt(e),l=d.charAt(e+1),ty(this,c,h=(o=d.substring(0,e)+l)+n+(f=d.substring(e+2)),r,t,i),ty(this,c,h=o+f,r,t,i);ty(this,c,d.substring(0,d.length-1),r,t,i)}break;case"full":if(s>2){for(let n=0,o;n<s;n++)for(r=s;r>n;r--){h=d.substring(n,r),o=this.rtl?s-1-n:n;var l=this.score?this.score(e,d,u,h,o):tx(g,f,u,s,o);ty(this,c,h,l,t,i)}break}case"bidirectional":case"reverse":if(s>1){for(l=s-1;l>0;l--){h=d[this.rtl?s-1-l:l]+h;var o=this.score?this.score(e,d,u,h,l):tx(g,f,u,s,l);ty(this,c,h,o,t,i)}h=""}case"forward":if(s>1){for(l=0;l<s;l++)ty(this,c,h+=d[this.rtl?s-1-l:l],r,t,i);break}default:if(ty(this,c,d,r,t,i),n&&f>1&&u<f-1)for(s=this.N,h=d,r=Math.min(n+1,this.rtl?u+1:f-u),l=1;l<r;l++){d=e[this.rtl?f-1-u-l:u+l],o=this.bidirectional&&d>h;let n=this.score?this.score(e,h,u,d,l-1):tx(s+(f/2>s?0:1),f,u,r-1,l-1);ty(this,a,o?h:d,n,t,i,o?d:h)}}}}this.fastupdate||this.reg.add(t)}}return this.db&&(this.commit_task.push(i?{ins:t}:{del:t}),this.M&&tj(this)),this},tz.prototype.search=function(t,e,i){if(i||(e||"object"!=typeof t?"object"==typeof e&&(i=e,e=0):(i=t,t="")),i&&i.cache)return i.cache=!1,t=this.searchCache(t,e,i),i.cache=!0,t;let n=[],s,r,h,l=0,o,f,a,c,g;i&&(t=i.query||t,e=i.limit||e,l=i.offset||0,r=i.context,h=i.suggest,g=(o=i.resolve)&&i.enrich,a=i.boost,c=i.resolution,f=this.db&&i.tag),void 0===o&&(o=this.resolve),r=this.depth&&!1!==r;let d=this.encoder.encode(t,!r);if(s=d.length,e=e||100*!!o,1===s)return tv.call(this,d[0],"",e,l,o,g,f);if(2===s&&r&&!h)return tv.call(this,d[1],d[0],e,l,o,g,f);let p=u(),m=0,w;if(r&&(w=d[0],m=1),c||0===c||(c=w?this.N:this.resolution),this.db){if(this.db.search&&!1!==(i=this.db.search(this,d,e,l,h,o,g,f)))return i;let t=this;return async function(){for(let e,i;m<s;m++){if((i=d[m])&&!p[i]){if(p[i]=1,e=tk(e=await tA(t,i,w,0,0,!1,!1),n,h,c)){n=e;break}w&&(h&&e&&n.length||(w=i))}h&&w&&m===s-1&&!n.length&&(c=t.resolution,w="",m=-1,p=u())}return tb(n,c,e,l,h,a,o)}()}for(let t,e;m<s;m++){if((e=d[m])&&!p[e]){if(p[e]=1,t=tk(t=tA(this,e,w,0,0,!1,!1),n,h,c)){n=t;break}w&&(h&&t&&n.length||(w=e))}h&&w&&m===s-1&&!n.length&&(c=this.resolution,w="",m=-1,p=u())}return tb(n,c,e,l,h,a,o)},(S=tz.prototype).mount=function(t){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),t.mount(this)},S.commit=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this)},S.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()},S.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db?(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[],this.db.clear()):this},S.append=function(t,e){return this.add(t,e,!0)},S.contain=function(t){return this.db?this.db.has(t):this.reg.has(t)},S.update=function(t,e){let i=this,n=this.remove(t);return n&&n.then?n.then(()=>i.add(t,e)):this.add(t,e)},S.cleanup=function(){return this.fastupdate&&(tm(this.map),this.depth&&tm(this.ctx)),this},S.searchCache=v,S.export=function(t,e,i=0,n=0){let s,r;switch(n){case 0:s="reg",r=tc(this.reg);break;case 1:s="cfg",r=null;break;case 2:s="map",r=to(this.map,this.reg.size);break;case 3:s="ctx",r=tu(this.ctx,this.reg.size);break;default:return}return td.call(this,t,e,s,r,i,n)},S.import=function(t,e){if(e)switch("string"==typeof e&&(e=JSON.parse(e)),"json"===(t=t.split("."))[t.length-1]&&t.pop(),3===t.length&&t.shift(),t=t.length>1?t[1]:t[0]){case"reg":this.fastupdate=!1,this.reg=tg(e,this.reg);break;case"map":this.map=tf(e,this.map);break;case"ctx":this.ctx=ta(e,this.ctx)}},S.serialize=function(t=!0){let e="",i="",n="";if(this.reg.size){let t;for(var s of this.reg.keys())t||(t=typeof s),e+=(e?",":"")+("string"===t?'"'+s+'"':s);for(let r of(e="index.reg=new Set(["+e+"]);",i="index.map=new Map(["+(i=tp(this.map,t))+"]);",this.ctx.entries())){s=r[0];let e=tp(r[1],t);e='["'+s+'",'+(e="new Map(["+e+"])")+"]",n+=(n?",":"")+e}n="index.ctx=new Map(["+n+"]);"}return t?"function inject(index){"+e+i+n+"}":e+i+n},N(tz.prototype);let tM="undefined"!=typeof window&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),tB=["map","ctx","tag","reg","cfg"],tC=u();function tS(t,e={}){if(!this||this.constructor!==tS)return new tS(t,e);"object"==typeof t&&(e=t,t=t.name),t||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(t?":"+t.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=e.field?e.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=e.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}function t_(t,e,i){let n=t.value,s,r=0;for(let t=0,h;t<n.length;t++){if(h=i?n:n[t]){for(let i=0,r,l;i<e.length;i++)if(l=e[i],(r=h.indexOf(l))>=0)if(s=1,h.length>1)h.splice(r,1);else{n[t]=[];break}r+=h.length}if(i)break}r?s&&t.update(n):t.delete(),t.continue()}function tO(t,e){return new Promise((i,n)=>{t.onsuccess=t.oncomplete=function(){e&&e(this.result),e=null,i(this.result)},t.onerror=t.onblocked=n,t=null})}(S=tS.prototype).mount=function(t){return t.index?t.mount(this):(t.db=this,this.open())},S.open=function(){if(this.db)return this.db;let t=this;navigator.storage&&navigator.storage.persist(),tC[t.id]||(tC[t.id]=[]),tC[t.id].push(t.field);let e=tM.open(t.id,1);return e.onupgradeneeded=function(){let e=t.db=this.result;for(let i=0,n;i<tB.length;i++){n=tB[i];for(let i=0,s;i<tC[t.id].length;i++)s=tC[t.id][i],e.objectStoreNames.contains(n+("reg"!==n&&s?":"+s:""))||e.createObjectStore(n+("reg"!==n&&s?":"+s:""))}},t.db=tO(e,function(e){t.db=e,t.db.onversionchange=function(){t.close()}})},S.close=function(){this.db&&this.db.close(),this.db=null},S.destroy=function(){return tO(tM.deleteDatabase(this.id))},S.clear=function(){let t=[];for(let e=0,i;e<tB.length;e++){i=tB[e];for(let e=0,n;e<tC[this.id].length;e++)n=tC[this.id][e],t.push(i+("reg"!==i&&n?":"+n:""))}let e=this.db.transaction(t,"readwrite");for(let i=0;i<t.length;i++)e.objectStore(t[i]).clear();return tO(e)},S.get=function(t,e,i=0,n=0,s=!0,r=!1){t=this.db.transaction((e?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((e?"ctx":"map")+(this.field?":"+this.field:"")).get(e?e+":"+t:t);let h=this;return tO(t).then(function(t){let e=[];if(!t||!t.length)return e;if(s){if(!i&&!n&&1===t.length)return t[0];for(let s=0,r;s<t.length;s++)if((r=t[s])&&r.length){if(n>=r.length){n-=r.length;continue}let t=i?n+Math.min(r.length-n,i):r.length;for(let i=n;i<t;i++)e.push(r[i]);if(n=0,e.length===i)break}return r?h.enrich(e):e}return t})},S.tag=function(t,e=0,i=0,n=!1){t=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(t);let s=this;return tO(t).then(function(t){return t&&t.length&&!(i>=t.length)?e||i?(t=t.slice(i,i+e),n?s.enrich(t):t):t:[]})},S.enrich=function(t){"object"!=typeof t&&(t=[t]);let e=this.db.transaction("reg","readonly").objectStore("reg"),i=[];for(let n=0;n<t.length;n++)i[n]=tO(e.get(t[n]));return Promise.all(i).then(function(e){for(let i=0;i<e.length;i++)e[i]={id:t[i],doc:e[i]?JSON.parse(e[i]):null};return e})},S.has=function(t){return tO(t=this.db.transaction("reg","readonly").objectStore("reg").getKey(t)).then(function(t){return!!t})},S.search=null,S.info=function(){},S.transaction=function(t,e,i){t+="reg"!==t&&this.field?":"+this.field:"";let n=this.h[t+":"+e];if(n)return i.call(this,n);let s=this.db.transaction(t,e);this.h[t+":"+e]=n=s.objectStore(t);let r=i.call(this,n);return this.h[t+":"+e]=null,tO(s).finally(function(){return s=n=null,r})},S.commit=async function(t){let e=t.commit_task,i=[];t.commit_task=[];for(let t=0,n;t<e.length;t++)(n=e[t]).del&&i.push(n.del);i.length&&await this.remove(i),t.reg.size&&(await this.transaction("map","readwrite",function(e){for(let i of t.map){let t=i[0],n=i[1];n.length&&(e.get(t).onsuccess=function(){var i;let s=this.result;if(s&&s.length){let t=Math.max(s.length,n.length);for(let e=0,r,h;e<t;e++)if((h=n[e])&&h.length){if((r=s[e])&&r.length)for(i=0;i<h.length;i++)r.push(h[i]);else s[e]=h;i=1}}else s=n,i=1;i&&e.put(s,t)})}}),await this.transaction("ctx","readwrite",function(e){for(let i of t.ctx){let t=i[0];for(let n of i[1]){let i=n[0],s=n[1];s.length&&(e.get(t+":"+i).onsuccess=function(){var n;let r=this.result;if(r&&r.length){let t=Math.max(r.length,s.length);for(let e=0,i,h;e<t;e++)if((h=s[e])&&h.length){if((i=r[e])&&i.length)for(n=0;n<h.length;n++)i.push(h[n]);else r[e]=h;n=1}}else r=s,n=1;n&&e.put(r,t+":"+i)})}}}),t.store?await this.transaction("reg","readwrite",function(e){for(let i of t.store){let t=i[0],n=i[1];e.put("object"==typeof n?JSON.stringify(n):1,t)}}):t.bypass||await this.transaction("reg","readwrite",function(e){for(let i of t.reg.keys())e.put(1,i)}),t.tag&&await this.transaction("tag","readwrite",function(e){for(let i of t.tag){let t=i[0],n=i[1];n.length&&(e.get(t).onsuccess=function(){let i=this.result;i=i&&i.length?i.concat(n):n,e.put(i,t)})}}),t.map.clear(),t.ctx.clear(),t.tag&&t.tag.clear(),t.store&&t.store.clear(),t.document||t.reg.clear())},S.remove=function(t){return"object"!=typeof t&&(t=[t]),Promise.all([this.transaction("map","readwrite",function(e){e.openCursor().onsuccess=function(){let e=this.result;e&&t_(e,t)}}),this.transaction("ctx","readwrite",function(e){e.openCursor().onsuccess=function(){let e=this.result;e&&t_(e,t)}}),this.transaction("tag","readwrite",function(e){e.openCursor().onsuccess=function(){let e=this.result;e&&t_(e,t,!0)}}),this.transaction("reg","readwrite",function(e){for(let i=0;i<t.length;i++)e.delete(t[i])})])};let tD={Index:tz,Charset:_,Encoder:x,Document:tr,Worker:R,Resolver:X,IndexedDB:tS,Language:{}}}}]);